<!DOCTYPE html>
<html lang="es">
<head>
    <script src="js/translations.js">function applyLanguage(language) {
    const lang = translations[language] || translations.es;
    
    // Traducir textos normales
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        if (lang[key]) {
            element.textContent = lang[key];
        }
    });
    
    // Traducir placeholders
    document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        if (lang[key]) {
            element.placeholder = lang[key];
        }
    });
    
    // Actualizar selectores de idioma
    if (document.getElementById('languageSelect')) {
        document.getElementById('languageSelect').value = language;
    }
    if (document.getElementById('languageSelectPage')) {
        document.getElementById('languageSelectPage').value = language;
    }
}</script>
    <meta charset="UTF-8">
    <title>M칠todos de Pago - Deli Pollo</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root {
            --rojo: #f44336;
            --rojo-hover: #d32f2f;
            --blanco: #ffffff;
            --gris-claro: #fffaf5;
        }

        body {
            background-color: var(--gris-claro);
            font-family: 'Segoe UI', sans-serif;
        }

        .navbar {
            background-color: var(--rojo) !important;
        }

        .btn-danger {
            background-color: var(--rojo);
            border-color: var(--rojo);
        }

        .btn-danger:hover {
            background-color: var(--rojo-hover);
            border-color: var(--rojo-hover);
        }

        .text-danger {
            color: var(--rojo) !important;
        }

        .bg-danger {
            background-color: var(--rojo) !important;
        }

        .card, .product-card, .modal-content {
            border: none !important;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .price-tag {
            background: #ffebee;
            color: var(--rojo);
        }

        /* Badge para el carrito */
        .cart-badge {
            font-size: 0.7rem;
        }

        /* Estilos para el modo administrador */
        .admin-badge {
            font-size: 0.7rem;
        }

        .sidebar {
            background-color: #fff;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            height: fit-content;
        }
    </style>
</head>

<body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container d-flex justify-content-between align-items-center">
            <a class="navbar-brand fw-bold" href="Menu.html">
                <i class="bi bi-house-door-fill"></i> Deli Pollo
            </a>

            <div class="d-flex align-items-center">
                <a href="Carrito.html" class="btn me-2 position-relative">
                    <i class="bi bi-cart-fill"></i>
                    <span id="cartBadge" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger cart-badge" style="display: none;">
                        0
                    </span>
                </a>

                <!-- Dropdown Configuraci칩n -->
                <div class="dropdown">
                    <button class="btn dropdown-toggle" type="button" id="configDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-gear-fill"></i>
                        <span id="adminBadge" class="admin-badge badge bg-warning ms-1" style="display: none;">Admin</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="configDropdown">
                        <li><a class="dropdown-item" href="MenuInicioSesion.html">Mi cuenta</a></li>
                        <li><a class="dropdown-item" href="SobreNosotros.html">Sobre Nosotros</a></li>
                        <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#languageModal">Idioma</a></li>
                        <li id="adminMenuItem" style="display: none;"><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#adminModal">Panel Admin</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li id="loginMenuItem"><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#loginModal">Iniciar sesi칩n</a></li>
                        <li id="logoutMenuItem" style="display: none;"><a class="dropdown-item text-danger" href="#" onclick="logout()">Cerrar sesi칩n</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <section id="catalogo" class="py-5">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-3 border-end">
                    <div class="list-group">
                        <a href="MenuInicioSesion.html" class="list-group-item list-group-item-action">Cuenta</a>
                        <a href="Idioma.html" class="list-group-item list-group-item-action">Idioma</a>
                        <a href="MetodosPago.html" class="list-group-item list-group-item-action active">M칠todos de Pago</a>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <div class="text-center mb-4">
                                <i class="bi bi-credit-card" style="font-size: 4rem; color: #f44336;"></i>
                            </div>

                            <div class="container py-4">
                                <h2 class="text-center mb-4">M칠todos de Pago</h2>

                                <form id="paymentMethodForm">
                                    <div class="mb-3">
                                        <label class="form-label">N칰mero de tarjeta</label>
                                        <input type="text" class="form-control" id="cardNumber" placeholder="XXXX XXXX XXXX XXXX" required>
                                    </div>

                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label class="form-label">Fecha de expiraci칩n</label>
                                            <input type="text" class="form-control" id="expiryDate" placeholder="MM/AA" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">CVC</label>
                                            <input type="text" class="form-control" id="cvc" placeholder="000" required>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">Nombre completo</label>
                                        <input type="text" class="form-control" id="cardholderName" required>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">Direcci칩n</label>
                                        <input type="text" class="form-control" id="billingAddress" required>
                                    </div>

                                    <button type="submit" class="btn btn-danger w-100">Guardar M칠todo de Pago</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal de Idioma -->
    <div class="modal fade" id="languageModal" tabindex="-1" aria-labelledby="languageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content shadow-lg rounded-4">
                <div class="modal-header border-0">
                    <h5 class="modal-title w-100 text-center fw-bold" id="languageModalLabel">Idioma</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <i class="bi bi-globe" style="font-size: 5rem; color: #f44336;"></i>
                    </div>
                    <p class="text-center text-muted mb-4">
                        Selecciona tu idioma preferido:
                    </p>
                    <form id="languageForm">
                        <div class="mb-3">
                            <select class="form-select" id="languageSelect">
                                <option value="es">Espa침ol</option>
                                <option value="en">English</option>
                                <option value="fr">Fran칞ais</option>
                            </select>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-danger">Guardar Cambios</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Login -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content shadow-lg rounded-4">
                <div class="modal-header border-0">
                    <h5 class="modal-title w-100 text-center fw-bold" id="loginModalLabel">Inicio de Sesi칩n</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-2">
                        <i class="bi bi-person-circle" style="font-size: 5rem; color: gray;"></i>
                    </div>
                    <form id="loginForm">
                        <div class="mb-2">
                            <label for="usuario" class="form-label">Nombre de Usuario</label>
                            <input type="text" class="form-control" id="usuario" placeholder="Ingrese su usuario" required>
                        </div>
                        <div class="mb-2">
                            <label for="password" class="form-label">Contrase침a</label>
                            <input type="password" class="form-control" id="password" placeholder="Ingrese su contrase침a" required>
                        </div>
                        <div class="d-grid mb-2">
                            <button type="submit" class="btn btn-danger w-100">Ingresar</button>
                        </div>
                    </form>
                    <div class="text-center mb-2">
                        <p class="text-muted">O inicia sesi칩n con</p>
                        <div class="d-flex justify-content-center gap-3 flex-wrap">
                            <button class="btn btn-outline-danger"><i class="bi bi-google me-2"></i>Google</button>
                            <button class="btn btn-outline-primary"><i class="bi bi-facebook me-2"></i>Facebook</button>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <a href="#" data-bs-toggle="modal" data-bs-target="#resetModal" data-bs-dismiss="modal">游댐 Restablecer contrase침a</a>
                        <a href="#" class="d-block" data-bs-toggle="modal" data-bs-target="#registerModal" data-bs-dismiss="modal">游 Crear una cuenta</a>
                        <a href="Menu.html" class="d-block">游녻 Ingresar como invitado</a>
                    </div>
                </div>
                <div class="modal-footer bg-light border-0 d-flex flex-column align-items-center mt-1">
                    <p class="mb-2 fw-semibold">Cont치ctanos:</p>
                    <div class="d-flex flex-column align-items-center">
                        <p class="mb-1"><i class="bi bi-envelope-fill me-2 text-primary"></i>DelpolloAttCli@gmail.com</p>
                        <p class="mb-0"><i class="bi bi-whatsapp me-2 text-success"></i>+506 0000-0000</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Registro -->
    <div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content shadow-lg rounded-4">
                <div class="modal-header border-0">
                    <h5 class="modal-title w-100 text-center fw-bold" id="registerModalLabel">Crear Cuenta</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <i class="bi bi-person-circle" style="font-size: 5rem; color: gray;"></i>
                    </div>
                    <form id="registerForm">
                        <div class="mb-3">
                            <label for="nuevoUsuario" class="form-label">Nombre de Usuario</label>
                            <input type="text" class="form-control" id="nuevoUsuario" placeholder="Ingrese su nombre de usuario" required>
                        </div>
                        <div class="mb-3">
                            <label for="correo" class="form-label">Correo Electr칩nico</label>
                            <input type="email" class="form-control" id="correo" placeholder="Ingrese su correo electr칩nico" required>
                        </div>
                        <div class="mb-3">
                            <label for="nuevaPassword" class="form-label">Contrase침a</label>
                            <input type="password" class="form-control" id="nuevaPassword" placeholder="Cree una contrase침a" required>
                        </div>
                        <div class="mb-3">
                            <label for="confirmarPassword" class="form-label">Confirmar Contrase침a</label>
                            <input type="password" class="form-control" id="confirmarPassword" placeholder="Confirme su contrase침a" required>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-danger">Crear Cuenta</button>
                        </div>
                    </form>
                </div>
                <div class="modal-footer bg-light border-0 d-flex flex-column align-items-center mt-3">
                    <p class="text-muted">쯏a tienes una cuenta?</p>
                    <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal" data-bs-dismiss="modal">Inicia Sesi칩n</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Restablecer Contrase침a -->
    <div class="modal fade" id="resetModal" tabindex="-1" aria-labelledby="resetModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content shadow-lg rounded-4">
                <div class="modal-header border-0">
                    <h5 class="modal-title w-100 text-center fw-bold" id="resetModalLabel">Restablecer Contrase침a</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <i class="bi bi-key-fill" style="font-size: 5rem; color: gray;"></i>
                    </div>
                    <p class="text-center text-muted mb-4">
                        Ingresa tu correo electr칩nico para recibir un enlace de restablecimiento de contrase침a.
                    </p>
                    <form id="resetForm">
                        <div class="mb-3">
                            <label for="correoReset" class="form-label">Correo Electr칩nico</label>
                            <input type="email" class="form-control" id="correoReset" placeholder="Ingrese su correo" required>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-danger fw-semibold">Enviar enlace</button>
                        </div>
                    </form>
                </div>
                <div class="modal-footer bg-light border-0 d-flex flex-column align-items-center mt-3">
                    <p class="text-muted">Recordaste tu contrase침a?</p>
                    <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal" data-bs-dismiss="modal">Volver a iniciar sesi칩n</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Administrador -->
    <div class="modal fade" id="adminModal" tabindex="-1" aria-labelledby="adminModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content shadow-lg rounded-4">
                <div class="modal-header border-0">
                    <h5 class="modal-title w-100 text-center fw-bold" id="adminModalLabel">Panel de Administraci칩n</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <i class="bi bi-shield-check" style="font-size: 5rem; color: #f44336;"></i>
                    </div>
                    
                    <ul class="nav nav-tabs" id="adminTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="products-tab" data-bs-toggle="tab" data-bs-target="#products" type="button" role="tab">Productos</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="combos-tab" data-bs-toggle="tab" data-bs-target="#combos" type="button" role="tab">Combos</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="orders-tab" data-bs-toggle="tab" data-bs-target="#orders" type="button" role="tab">Pedidos</button>
                        </li>
                    </ul>
                    
                    <div class="tab-content p-3" id="adminTabContent">
                        <div class="tab-pane fade show active" id="products" role="tabpanel">
                            <h5>Gesti칩n de Productos</h5>
                            <button class="btn btn-success mb-3" data-bs-toggle="modal" data-bs-target="#addProductModal">Agregar Producto</button>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Nombre</th>
                                            <th>Precio</th>
                                            <th>Categor칤a</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="productsTable">
                                        <!-- Los productos se cargar치n din치micamente aqu칤 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="tab-pane fade" id="combos" role="tabpanel">
                            <h5>Gesti칩n de Combos</h5>
                            <button class="btn btn-success mb-3" data-bs-toggle="modal" data-bs-target="#addComboModal">Agregar Combo</button>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Nombre</th>
                                            <th>Precio</th>
                                            <th>Productos</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="combosTable">
                                        <!-- Los combos se cargar치n din치micamente aqu칤 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="tab-pane fade" id="orders" role="tabpanel">
                            <h5>Gesti칩n de Pedidos</h5>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Cliente</th>
                                            <th>Total</th>
                                            <th>Estado</th>
                                            <th>Fecha</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="ordersTable">
                                        <!-- Los pedidos se cargar치n din치micamente aqu칤 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Alert para mostrar mensajes -->
    <div id="customAlert" class="alert alert-success custom-alert" style="display: none;">
        <i class="bi bi-check-circle-fill me-2"></i>
        <span id="alertMessage"></span>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // ========== GESTI칍N DE USUARIOS ==========
        
        // Funci칩n para obtener usuarios del localStorage
        function getUsers() {
            return JSON.parse(localStorage.getItem('users')) || [];
        }
        
        // Funci칩n para guardar usuarios en localStorage
        function saveUsers(users) {
            localStorage.setItem('users', JSON.stringify(users));
        }
        
        // Funci칩n para obtener el usuario actual
        function getCurrentUser() {
            return JSON.parse(localStorage.getItem('currentUser')) || null;
        }
        
        // Funci칩n para guardar el usuario actual
        function saveCurrentUser(user) {
            localStorage.setItem('currentUser', JSON.stringify(user));
        }
        
        // Funci칩n para registrar un nuevo usuario
        function registerUser(username, email, password) {
            const users = getUsers();
            
            // Verificar si el usuario ya existe
            if (users.find(user => user.username === username)) {
                showAlert('El nombre de usuario ya existe', 'danger');
                return false;
            }
            
            if (users.find(user => user.email === email)) {
                showAlert('El correo electr칩nico ya est치 registrado', 'danger');
                return false;
            }
            
            // Crear nuevo usuario
            const newUser = {
                id: Date.now(),
                username: username,
                email: email,
                password: password,
                isAdmin: username === 'admin' // Por simplicidad, el usuario 'admin' ser치 administrador
            };
            
            users.push(newUser);
            saveUsers(users);
            
            // Iniciar sesi칩n autom치ticamente
            saveCurrentUser(newUser);
            updateUIForUser(newUser);
            
            showAlert('춰Cuenta creada exitosamente!');
            return true;
        }
        
        // Funci칩n para iniciar sesi칩n
        function loginUser(username, password) {
            const users = getUsers();
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                saveCurrentUser(user);
                updateUIForUser(user);
                showAlert(`춰Bienvenido, ${user.username}!`);
                return true;
            } else {
                showAlert('Usuario o contrase침a incorrectos', 'danger');
                return false;
            }
        }
        
        // Funci칩n para cerrar sesi칩n
        function logout() {
            localStorage.removeItem('currentUser');
            updateUIForUser(null);
            showAlert('Sesi칩n cerrada correctamente');
        }
        
        // Funci칩n para actualizar la UI seg칰n el usuario
        function updateUIForUser(user) {
            const loginMenuItem = document.getElementById('loginMenuItem');
            const logoutMenuItem = document.getElementById('logoutMenuItem');
            const adminMenuItem = document.getElementById('adminMenuItem');
            const adminBadge = document.getElementById('adminBadge');
            
            if (user) {
                loginMenuItem.style.display = 'none';
                logoutMenuItem.style.display = 'block';
                
                if (user.isAdmin) {
                    adminMenuItem.style.display = 'block';
                    adminBadge.style.display = 'inline';
                } else {
                    adminMenuItem.style.display = 'none';
                    adminBadge.style.display = 'none';
                }
            } else {
                loginMenuItem.style.display = 'block';
                logoutMenuItem.style.display = 'none';
                adminMenuItem.style.display = 'none';
                adminBadge.style.display = 'none';
            }
        }
        
        // ========== GESTI칍N DE IDIOMA ==========
        
        // Funci칩n para obtener el idioma actual
        function getCurrentLanguage() {
            return localStorage.getItem('language') || 'es';
        }
        
        // Funci칩n para guardar el idioma
        function saveLanguage(language) {
            localStorage.setItem('language', language);
            applyLanguage(language);
        }
        
        // Funci칩n para aplicar el idioma
        function applyLanguage(language) {
            const translations = {
                es: {
                    // Textos en espa침ol
                },
                en: {
                    // Textos en ingl칠s
                },
                fr: {
                    // Textos en franc칠s
                }
            };
            
            // Aqu칤 se aplicar칤an las traducciones a los elementos de la p치gina
            // Por simplicidad, solo actualizamos el selector
            document.getElementById('languageSelect').value = language;
        }
        
        // ========== GESTI칍N DEL CARRITO ==========
        
        // Funci칩n para obtener el carrito del localStorage
        function getCart() {
            try {
                return JSON.parse(localStorage.getItem('cart')) || [];
            } catch (error) {
                console.error('Error al obtener el carrito:', error);
                return [];
            }
        }
        
        // Funci칩n para actualizar la cantidad en el 칤cono del carrito
        function updateCartCount() {
            const cart = getCart();
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const cartBadge = document.getElementById('cartBadge');
            
            if (cartBadge) {
                if (totalItems > 0) {
                    cartBadge.textContent = totalItems;
                    cartBadge.style.display = 'block';
                } else {
                    cartBadge.style.display = 'none';
                }
            }
        }
        
        // ========== GESTI칍N DE M칄TODOS DE PAGO ==========
        
        // Funci칩n para guardar m칠todo de pago
        function savePaymentMethod() {
            const cardNumber = document.getElementById('cardNumber').value;
            const expiryDate = document.getElementById('expiryDate').value;
            const cvc = document.getElementById('cvc').value;
            const cardholderName = document.getElementById('cardholderName').value;
            const billingAddress = document.getElementById('billingAddress').value;
            
            if (cardNumber && expiryDate && cvc && cardholderName && billingAddress) {
                const paymentMethod = {
                    cardNumber: cardNumber,
                    expiryDate: expiryDate,
                    cvc: cvc,
                    cardholderName: cardholderName,
                    billingAddress: billingAddress
                };
                
                localStorage.setItem('paymentMethod', JSON.stringify(paymentMethod));
                showAlert('M칠todo de pago guardado exitosamente');
            } else {
                showAlert('Por favor completa todos los campos', 'warning');
            }
        }
        
        // ========== GESTI칍N DE ALERTAS ==========
        
        // Funci칩n para mostrar alertas
        function showAlert(message, type = 'success') {
            const alert = document.getElementById('customAlert');
            const messageElement = document.getElementById('alertMessage');
            
            alert.className = `alert alert-${type} custom-alert`;
            messageElement.textContent = message;
            alert.style.display = 'block';
            
            setTimeout(() => {
                alert.style.display = 'none';
            }, 3000);
        }
        
        // ========== INICIALIZACI칍N ==========
        
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar carrito
            updateCartCount();
            
            // Inicializar usuario
            const currentUser = getCurrentUser();
            updateUIForUser(currentUser);
            
            // Inicializar idioma
            const currentLanguage = getCurrentLanguage();
            applyLanguage(currentLanguage);
            
            // Configurar formularios
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('usuario').value;
                const password = document.getElementById('password').value;
                
                if (loginUser(username, password)) {
                    const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
                    loginModal.hide();
                }
            });
            
            document.getElementById('registerForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('nuevoUsuario').value;
                const email = document.getElementById('correo').value;
                const password = document.getElementById('nuevaPassword').value;
                const confirmPassword = document.getElementById('confirmarPassword').value;
                
                if (password !== confirmPassword) {
                    showAlert('Las contrase침as no coinciden', 'danger');
                    return;
                }
                
                if (registerUser(username, email, password)) {
                    const registerModal = bootstrap.Modal.getInstance(document.getElementById('registerModal'));
                    registerModal.hide();
                }
            });
            
            document.getElementById('resetForm').addEventListener('submit', function(e) {
                e.preventDefault();
                showAlert('Se ha enviado un enlace de restablecimiento a su correo');
                const resetModal = bootstrap.Modal.getInstance(document.getElementById('resetModal'));
                resetModal.hide();
            });
            
            document.getElementById('languageForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const language = document.getElementById('languageSelect').value;
                saveLanguage(language);
                showAlert('Idioma cambiado correctamente');
                const languageModal = bootstrap.Modal.getInstance(document.getElementById('languageModal'));
                languageModal.hide();
            });
            
            document.getElementById('paymentMethodForm').addEventListener('submit', function(e) {
                e.preventDefault();
                savePaymentMethod();
            });
            
            // Crear usuario administrador por defecto si no existe
            const users = getUsers();
            if (!users.find(user => user.username === 'admin')) {
                registerUser('admin', 'admin@delipollo.com', 'admin123');
            }
        });
    </script>
</body>
</html>